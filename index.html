<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í˜ì´ì§€ ì´ë™ ì¤‘...</title>
    <style>
        body { margin: 0; padding: 0; background-color: #f5f5f5; font-family: -apple-system, BlinkMacSystemFont, "Apple SD Gothic Neo", "Malgun Gothic", sans-serif; }
        
        #loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            flex-direction: column;
            text-align: center;
        }
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* iOS ê°€ì´ë“œ í™”ë©´ */
        #ios-guide {
            display: none;
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.85);
            z-index: 9999; color: white;
            text-align: center; flex-direction: column; padding-top: 50px;
        }
        .guide-arrow { position: absolute; top: 10px; right: 20px; font-size: 50px; animation: bounce 1s infinite; }
        .guide-text { margin-top: 80px; font-size: 18px; line-height: 1.6; padding: 0 20px; }
        .guide-icon { background: #fff; color: #333; padding: 2px 8px; border-radius: 4px; font-weight: bold; margin: 0 4px; }

        /* ì•ˆë“œë¡œì´ë“œ ìˆ˜ë™ ë²„íŠ¼ í™”ë©´ */
        #android-manual {
            display: none; /* JSë¡œ ì œì–´ */
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background-color: #fff;
            z-index: 9999;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
        }
        .android-btn {
            background-color: #4285F4; /* í¬ë¡¬ ì»¬ëŸ¬ */
            color: white;
            font-size: 18px;
            font-weight: bold;
            padding: 15px 30px;
            border-radius: 30px;
            text-decoration: none;
            box-shadow: 0 4px 6px rgba(0,0,0,0.2);
            margin-top: 20px;
        }
        .android-msg { font-size: 16px; color: #333; margin-bottom: 20px; padding: 0 20px; }

        @keyframes bounce { 0%, 100% { transform: translateY(0); } 50% { transform: translateY(-10px); } }
    </style>
</head>
<body>

    <div id="loading">
        <div class="spinner"></div>
        <p>ì—°ê²° ì¤‘ì…ë‹ˆë‹¤...</p>
    </div>

    <div id="ios-guide">
        <div class="guide-arrow">ğŸ‘†</div>
        <div class="guide-text">
            ì ‘ì†ì´ ì›í™œí•˜ì§€ ì•ŠìŠµë‹ˆë‹¤.<br><br>
            í™”ë©´ ìš°ì¸¡ ìƒë‹¨ì˜ <span class="guide-icon">Â·Â·Â·</span> ë˜ëŠ” <span class="guide-icon">ê³µìœ </span> ë²„íŠ¼ì„ ëˆŒëŸ¬<br>
            <strong>[Safarië¡œ ì—´ê¸°]</strong>ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.
        </div>
    </div>

    <div id="android-manual">
        <p class="android-msg">ë³´ì•ˆ ì •ì±…ìœ¼ë¡œ ì¸í•´ ìë™ ì—°ê²°ì´ ì°¨ë‹¨ë˜ì—ˆìŠµë‹ˆë‹¤.<br>ì•„ë˜ ë²„íŠ¼ì„ ëˆŒëŸ¬ì£¼ì„¸ìš”.</p>
        <a id="chrome-btn" href="#" class="android-btn">Chromeìœ¼ë¡œ ì—´ê¸°</a>
    </div>

    <script>
        (function() {
            const userAgent = navigator.userAgent.toLowerCase();
            const targetUrl = "xconnect-e36e7.web.app/"; 
            const fullUrl = "https://" + targetUrl;
            
            // í¬ë¡¬ ì¸í…íŠ¸ ì£¼ì†Œ (íŒ¨í‚¤ì§€ ê°•ì œ ì§€ì •)
            const chromeIntent = `intent://${targetUrl}#Intent;scheme=https;package=com.android.chrome;end`;

            // ì¸ì•± ë¸Œë¼ìš°ì € ì²´í¬
            const isInApp = /kakaotalk|naver|instagram|facebook|line|band/i.test(userAgent);

            // 1. ì•ˆë“œë¡œì´ë“œ
            if (userAgent.includes("android")) {
                if (isInApp) {
                    // ë„¤ì´ë²„/ì¹´í†¡ ë“± ì¸ì•±ì´ë©´: ìë™ ì‹¤í–‰ ì‹œë„ + ë²„íŠ¼ ë„ìš°ê¸°
                    // (ìë™ ì‹¤í–‰ì€ ë§‰í í™•ë¥  ë†’ìŒ)
                    document.getElementById("chrome-btn").href = chromeIntent;
                    document.getElementById("loading").style.display = "none";
                    document.getElementById("android-manual").style.display = "flex";
                    
                    // í˜¹ì‹œ ëª¨ë¥´ë‹ˆ ìë™ ì‹¤í–‰ë„ í•œ ë²ˆ ì°”ëŸ¬ë´„
                    location.href = chromeIntent;
                } else {
                    // ì¼ë°˜ ë¸Œë¼ìš°ì €(ì‚¼ì„±ì¸í„°ë„· ë“±)ë©´ ë°”ë¡œ í¬ë¡¬ í˜¸ì¶œ
                    location.href = chromeIntent;
                }
            } 
            
            // 2. iOS (ì•„ì´í°/ì•„ì´íŒ¨ë“œ)
            else if (userAgent.includes("iphone") || userAgent.includes("ipad") || userAgent.includes("ipod")) {
                if (isInApp) {
                    // ì¹´í†¡/ë„¤ì´ë²„ ì•± ë“±ì—ì„œëŠ” ê°€ì´ë“œ í™”ë©´ ë…¸ì¶œ
                    document.getElementById("loading").style.display = "none";
                    document.getElementById("ios-guide").style.display = "flex";
                } else {
                    // ì‚¬íŒŒë¦¬ë‚˜ í¬ë¡¬ ì•± ìì²´ì—ì„œëŠ” ê·¸ëƒ¥ ì´ë™
                    // (ì‚¬ìš©ìê°€ í¬ë¡¬ì„ ê¸°ë³¸ìœ¼ë¡œ ì„¤ì •í–ˆìœ¼ë©´ í¬ë¡¬ìœ¼ë¡œ ëœ¨ëŠ” ê±´ ì–´ì©” ìˆ˜ ì—†ìŒ)
                    location.href = fullUrl;
                }
            } 
            
            // 3. PC ë“±
            else {
                location.href = fullUrl;
            }
        })();
    </script>
</body>
</html>
