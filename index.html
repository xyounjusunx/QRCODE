<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>í˜ì´ì§€ ì´ë™ ì¤‘...</title>
    <style>
        body { margin: 0; padding: 0; background-color: #f5f5f5; font-family: -apple-system, BlinkMacSystemFont, "Apple SD Gothic Neo", "Malgun Gothic", sans-serif; }
        
        /* ë¡œë”© ì¤‘ í™”ë©´ */
        #loading {
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            flex-direction: column;
            text-align: center;
        }
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #3498db;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
            margin-bottom: 20px;
        }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }

        /* ì¸ì•± ë¸Œë¼ìš°ì € íƒˆì¶œ ê°€ì´ë“œ (ê¸°ë³¸ì ìœ¼ë¡œ ìˆ¨ê¹€) */
        #guide-overlay {
            display: none; /* JSë¡œ ì œì–´ */
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background-color: rgba(0, 0, 0, 0.85);
            z-index: 9999;
            color: white;
            text-align: center;
            flex-direction: column;
            justify-content: flex-start;
            padding-top: 50px;
        }
        .guide-arrow {
            position: absolute;
            top: 10px;
            right: 20px;
            font-size: 50px;
            animation: bounce 1s infinite;
        }
        .guide-text {
            margin-top: 80px;
            font-size: 18px;
            line-height: 1.6;
            padding: 0 20px;
        }
        .guide-icon {
            display: inline-block;
            background: #fff;
            color: #333;
            padding: 2px 8px;
            border-radius: 4px;
            font-weight: bold;
            margin: 0 4px;
        }
        .btn-manual {
            margin-top: 30px;
            padding: 12px 24px;
            background-color: #3498db;
            color: white;
            border: none;
            border-radius: 25px;
            font-size: 16px;
            cursor: pointer;
            text-decoration: none;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }
    </style>
</head>
<body>

    <div id="loading">
        <div class="spinner"></div>
        <p>ì‚¬ì´íŠ¸ë¡œ ì—°ê²° ì¤‘ì…ë‹ˆë‹¤...</p>
    </div>

    <div id="guide-overlay">
        <div class="guide-arrow">ğŸ‘†</div>
        <div class="guide-text">
            ì´ í˜ì´ì§€ëŠ” ì™¸ë¶€ ë¸Œë¼ìš°ì €ì—ì„œ<br>ì •ìƒ ì‘ë™í•©ë‹ˆë‹¤.<br><br>
            í™”ë©´ ìš°ì¸¡ ìƒë‹¨ì˜ <span class="guide-icon">Â·Â·Â·</span> ë˜ëŠ” <span class="guide-icon">ê³µìœ </span> ë²„íŠ¼ì„ ëˆŒëŸ¬<br>
            <strong>[Safarië¡œ ì—´ê¸°]</strong>ë¥¼ ì„ íƒí•´ì£¼ì„¸ìš”.
        </div>
        <br>
        <a href="https://xconnect-e36e7.web.app/" class="btn-manual" target="_blank">ë¸Œë¼ìš°ì €ë¡œ ì´ë™í•˜ê¸°</a>
    </div>

    <script>
        (function() {
            const userAgent = navigator.userAgent.toLowerCase();
            const targetUrl = "xconnect-e36e7.web.app/";
            const fullUrl = "https://" + targetUrl;

            // ì¸ì•± ë¸Œë¼ìš°ì € í™•ì¸ìš© í‚¤ì›Œë“œ (ì¹´í†¡, ë„¤ì´ë²„, ì¸ìŠ¤íƒ€, í˜ì´ìŠ¤ë¶, ë¼ì¸ ë“±)
            const isInApp = /kakaotalk|naver|instagram|facebook|line|band/i.test(userAgent);

            // 1. ì•ˆë“œë¡œì´ë“œ: ì¸ì•±ì´ë“  ì•„ë‹ˆë“  ì¼ë‹¨ í¬ë¡¬ ê°•ì œ ì‹¤í–‰ ì‹œë„
            if (userAgent.includes("android")) {
                const chromeIntent = `intent://${targetUrl}#Intent;scheme=https;package=com.android.chrome;end`;
                location.href = chromeIntent;
                // ë§Œì•½ í¬ë¡¬ì´ ì—†ì–´ì„œ ì‹¤í–‰ì´ ì•ˆ ë  ê²½ìš°ë¥¼ ëŒ€ë¹„í•´ ì¼ì • ì‹œê°„ í›„ ì¼ë°˜ ì´ë™ ì‹œë„ (ì„ íƒì‚¬í•­)
                setTimeout(function() { location.href = fullUrl; }, 1500); 
            } 
            
            // 2. iOS (ì•„ì´í°/ì•„ì´íŒ¨ë“œ)
            else if (userAgent.includes("iphone") || userAgent.includes("ipad") || userAgent.includes("ipod")) {
                
                if (isInApp) {
                    // 2-1. iOSë©´ì„œ ì¸ì•± ë¸Œë¼ìš°ì €ì¸ ê²½ìš° -> ê°€ì´ë“œ í™”ë©´ ë…¸ì¶œ
                    document.getElementById("loading").style.display = "none";
                    document.getElementById("guide-overlay").style.display = "flex";
                } else {
                    // 2-2. iOSë©´ì„œ ì‚¬íŒŒë¦¬/í¬ë¡¬ ë“± ì¼ë°˜ ë¸Œë¼ìš°ì €ì¸ ê²½ìš° -> ë°”ë¡œ ì´ë™
                    location.href = fullUrl;
                }
            } 
            
            // 3. PC ë“± ê¸°íƒ€ í™˜ê²½ -> ë°”ë¡œ ì´ë™
            else {
                location.href = fullUrl;
            }
        })();
    </script>
</body>
</html>
